{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mashzen | Mashgame | Signup</title>
    <script src="{% static 'mashgame/jquery.js' %}"></script>
    <link rel="stylesheet" type="text/css" href={% static 'mashgame/base.css' %}>

  <head>


  <body>
    <div style="text-align: center">
      <h1>Mashgame</h1>
      <h3>Signup</h3>
    <div>

    <div style="text-align: center">
      <form action="{% url 'mashgame:join_signup_user' %}" name="user_signup_form" method="post" autocomplete="off">
        {% csrf_token %}
        <label for="user_name"><b>Username</b></label>
        <br>
        <input type="text" placeholder="user name" name="user_name" id="js_user_name" required>
        <label id="js_user_name_exist_label"></label>
        <br>
        <br>
        <label for="password"><b>Password</b></label>
        <br>
        <input type="password" placeholder="password" name="password" id="js_password" minlength="4" maxlength="10" required >
        <br>
        <br>
        <label for="confirm_password"><b>Confirm Password</b></label>
        <br>
        <input type="password" placeholder="confirm password" name="confirm_password" id="js_confirm_password" minlength="4" maxlength="10" onkeyup="check()" required >
        <br>
        <br>
        <button type="submit" id="js_signup_button">Signup</button>
      </form>
      <br>
      <a href="{% url 'mashgame:mashgame' %}">Login</a>
    </div>


    {% block javascript %}
      <script>
        $("#js_user_name").keyup(function(){
          var user_name = $(this).val();

          $.ajax({
            url: "{% url 'mashgame:validate_username' %}",
            data: {
              'user_name': user_name
            },
            dataType: 'json',
            success: function(res_data) {
              if(res_data.is_taken) {
                document.getElementById("js_user_name").style.borderColor = "red";
                $("#js_signup_button").hide();
              }
              else{
                document.getElementById("js_user_name").style.borderColor = "green";
                $("#js_signup_button").show();
              }
            }
          });
        });

        var check = function(){
          if(document.getElementById('js_password').value==
             document.getElementById('js_confirm_password').value){
            document.getElementById("js_confirm_password").style.borderColor = "green";
            $("#js_signup_button").show();
          }
          else {
            document.getElementById("js_confirm_password").style.borderColor = "red";
            $("#js_signup_button").hide();
          }
        }
      </script>
    {% endblock %}
  </body>
</html>
